language: minimal
jobs:
  include:
    - stage: test
      language: node_js
      node_js:
        - '10'
      cache: yarn
      before_install:
        - echo "Skipping before install"
      script:
        - yarn danger ci
      if: type = pull_request
    - stage: deploy
      script:
        - curl -f -XPOST -H "$DX_HEADER" $IMPORT_URL_STAGING -d "branch=$TRAVIS_PULL_REQUEST_BRANCH"
      if: |
        branch = master AND \
        type = pull_request
    - stage: deploy
      script:
        - curl -f -XPOST -H "$DX_HEADER" $IMPORT_URL
      if: |
        branch = master AND \
        type = push
env:
  global:
    - secure: O6ysXbWMsdhqw7BLUnZmC/wrnT5fkBXshdZpUXmErTqz41kRi7wi2blJ+mK3O4QaGXIworcrPO1Ugo1H8dKqtq7Ru/TK14wUBQI+36bzJP0P0+3cWM1J/+XkvvQ/ShyRP1M+WGkzqVDIb71QzQ+D+QKrwkScWE78vYyvK9lnfRR6NLSveBy5p2bso1hnm5091Zq8GUqWxUKAybChFk7SY1nz1M2gTbH4UiCSEjRuKM7lb4537OQuMhvHWZGe6To1yRZ10eQEV+Ixf6WKPZXaPt2wNOdsnWO2956t6FVz8Ua+RzESE2Irb5oAaPec+noZqJX8wMP5VNuZt171UL3sMbEld8gKg83xR9iGyyB+hXbW4YWZle4oi/VR6XF0O6D3Ym7R0FhriYh2LDNPNrPEHXF5WZDOcrvVTXdnZ+SGa0QAbSc1y2AhrL1Yl5bzwmFBkzIwI1g/vQ2xwBs/rEx3upd8D3aITJX3n+CoI9SEAaBsNVk5vSFTHkGRuEOd9xCd20rfK4hkWh14eiIWVYZ/By1dOyXU0MQAcFDKJcirLY4u4M+HL5PytO0upv7y8iGPUINdOCaQ2Ha+BnDFsxLDYpYeKUNcUHooCBdrxk4zRw9wazGQ6IQ4keKI6QlRejAEfGVJFnwOdnok8DN40GbIp9WuVSQnx12ctRUEl3Fh4Yw=
    - secure: kGThYwbVEFl5OZxe1a7fTfW1X8eLc4TxPfNyyR0dXApe9//IYJTFPcHarz4wjmRml/lWJOJdpj7EQgmfIT/wxyq2YRbqSdkIzMEjpJ0b6h4/N1FUMAsVlh+Qq5Yz6B5H+Sc4xQPmAVu2ahVKajb8sQWR+ApMlLak5F/sRx7PQTd8SCWMjvmfOlg/6Or4gGRuSTW4fOhzFJ1x9Ov0z5dR2N4fk4JFRld7r29t2xJTrEvWKsmcGQu49yN0ILsqpPAbedmpLvTLGHX0mQZDNjfzoD2g/ptpq/KlQ3uMljjb+abwTCLhZ8Fm1387zxhmthugK0rqalddntRLVoYlqLZXFnM+5qY1YRiSSXyGknUYCo32IaJDZVo7KP76tpT37gMbPX1lxrhzf6JlHgDIyooZggqDf0wDVJt7Ar+mb4wgaylYfVZUugmyVHTt8VlPpfw1YMvDQdUXGmP2K0Msob2++03u37ir36pPJVNPOSJme2N1M+IJnS5jAjSj7YvWspEFpEKMOoQXNrG+T1JHlbwxCfTtFh+MpbT1maLLQCEehPkMqDuI2lMKzwotEZQ4M8ykJmpLW/dz9SoqvvWkn0lAOIhv1UVsr/xAMRe7xLSHTQrSkaXfO6KEomK8udB+g7cc2vQ4YsrX+PtVM5QbEX0qpFrrllXCpTYjjUojeRpuqIU=
    - secure: wgVUx4n1CtjEV8AO+nikkVerbnMujxjIp39U4M6L49RaPTPwjGAdFwCSEAO31ElK9QEyRUFWtnTN3eTocoa4j9KWKPge6lxcrh2R6KCFxSwsRgFPXzrRu0gy/w5luJocEqHs0GsE7as/y9y/Hnod4Y4ba4I9mzNFgPYkvTgssTl5SIa/v22hK8nninIKBN2YYs52np6bZdk9h1BWF1LHHIL5LSho2L5U2XoE393Vj8oX0iAuZDoqWOS2p0JE1Bnzwhd2Qes/+yta3mmGoyEImheb+323WDVlH13QyJvNqnKnZMFt/cAcPHIFvqqoVDhc3MZvzQl1wEJ10CWyBdr11pKrY9pT5Galc5EYjLNtuRmSL3dVWCJiJQlWGeYwpMpJeKSsLhst5nbM8ze2ENZEydw1Yfb2hAqI81olgH9AYdqkrKU3lp0oKLAuP8V4s1zWRzMntcGdlMaMrFN/epj6Xlug62yYCVYkjqdWv7wlTiC3PXa7C82prqdhiuTBTM0VdMtvrWpf5meJbiuGMOc4vfLG83tfOk7mj+SUlPVSBTa50qpEVc/7LQ6nIfzPRpOIhW3ERWn6+11UPRNFh/xbUbbLmocU8AO4yhjbcthq6J8volFk+Qx2RJCsGSw0BGEX83uqsMMMWTSoABSTHyaO6armHTR3Gw/mc9gkB7cUux0=
    - secure: BEyp9Y+Oj5bg/wAWzHViuLMcwgSoNUJKz3z133YtqrfTeiin3RcDb4jxVwUUwMyu4LT2byfo+RKW4+DarVzFcs71KIAxqEYqyncOZXyc/qA3hbCb74mOmfnzQyuvHl7Q2V69ZVla93tQoXRd+rams1Z9d3qwUDeEq+SMMXpCAeulPiMC5R2R3n5+2mRH4aXR8t5hfou9e70Seos/FUVrrOLY7ohSXLAK/HiMmsSQ1knQqMBqN1N2g0hEvOjbAQRRBd76fjIx4V5H316Au7k/YmaBFfXp1D+BHqCWHWq0QBWnyK4vLWz/t6tFuwsvgNmX4+84FldtqTd6VJh3x2IjFIv+k8Dg2rHh9th+FLGuKq+I+DudJZXNn70niIwXQu3NNGn5izAslG+/fXAM+SN9x9zmF82x2Br186Vm/IVjto+m8gQrUi1K//pQob3Zkqhb2PhrF2PpmrcoyTXue89sNATovYJyJNIFtrt8VJTY5w21n2vpz1qKrDQ6Wo/g2hszzkmNh6X2S3f7R5ogTUHWH2hdioVpfswxx/gk4O2DRhVhPQcXtllRw/SM60sJO2ADIJ55CDalTY9+B+XafhOv7FZBEnZ1zDM5vd1Edz8fepxREAQNqdZTSCgEDQjXJZi5KuWD2ETM7PACrcDQQWzztP0coZWN9yaA7VFLg0Q6Eb0=
    - secure: b4DiG3rBFYpQwGhnBMKCvYqj4lND4hCMqcZ1nHUjHaGZQAaUfhAacC8NRgDx71aLsmqKOHfi6A9F8uSnPbGC8WsxY77CPPWEBybhoMnjfptRiszEmrZUIfVJkKR5yUCTxPAoijk9eeSyu+4l9zRQXVLQu07bQDmhhv0UjaRxP7aWURbkDDQV+oV0Bks0uNIlJp8bFmZMjhGYP/bUO2IlS1eToDr8x6XperbBf+jHtIO4Yv1pymELnZOyeVKBfUHJQe6xPZ8dJjwL2MuYp+oIC1wfsCJucAbENCoRSbE8tDNnzUJjjAAinZ57PnYrwzTr16GKzQVVCuycLSmkx2l0ZZvo9BcUZJzs8eu8T20WnhxfKj1jH9IaHSQwKxxBM3cMftxI4L2n2GIqxBNFGZqAp91rYXTcfuiDg2AimbsHawlFJn6KLmfy/O5mRbWo+9+XG1MsLGmEytSKnq0L/DydT3MtZR3AzKWjmzzo/vyeFdXlx/avmTIh4zqQunWeOSDkCDfpxhbFVQB6x6IRbNSeSKj8Zh1+DqrXT2C5kShn6FwJ/MeGHYeA+uE0auP9hwA5S4EmgQow6hlYewHIgDpP2nr26apt0xmHPpw2LZgpPLcFAKTiMsdg/2xlcZthWgB0rPF0MpqDIU8D5CMmOGb/DONIyCNb0iIwKoyVXvEPUng=
    - secure: jmM3CBQTxmMScgb9Iifm8q2DfB2VLd/vpfIb18N03jHTWP9Jz2HMJBAQzvKOqcKy8gBHRt1EOMCiWZknDsBve0JKTReq78CYnmMz5pcru3iBFA2u16cGkrzRPuSsLzQ9Opkh8xIlN0mjszGi/zVqNKvJxsyaMGWvwqFfxjy64WRU7TQ0LiRsuPB0Gk1J3tA/J2t8RQgqaoqyFlM6szOZGzhUdDvc9XwAemVHXFH/Prp7ij0KBaiJ30Auwx+A+OxcA0VPE0ohyEXhBaXrQXchXNxZ6xqsu7zB+L+xRf7/YHjuF8wQV8QMCqfZ0JEGZ146lpavm+eI+uIizM82GS2Np6nM8NOwbDkIzAgMjGneBb0gwJL/avqr7VwDDRTrWnEKlcesix1XZMnBkexgd6YLpJ/cWDx1C0tlXMoIQSHNRHVaH3YPc8piMS9qqUyBA9YOwEc5ufAzWBEATsY95/GvMjZb3nF9iEoAoA3UskJmiIMUl4Lhowy6hIdLjPqKyY6f77xcKt23RqQTecVbW8i1X3WiyBHhGif6FSaiJXxXTs16ekHopgY84A83+L9aZ8k12KkmIkarVranUFaefhyGr5GfDc0bVF/g8KCDhQMA+oTws3bAaGTS9CLYt5Opye7jiU3OP6WibPavO8QRzLz9Y4FmXJ3zzMNiIXzLwCTQ0gU=
